%
% LICENSE
% You are free to:
%    * Share — copy and redistribute the material in any medium or format
%    * Adapt — remix, transform, and build upon the material
%    * The licensor cannot revoke these freedoms as long as you follow the license terms.
%
% Under the following terms:
%    * Attribution — You must give appropriate credit, provide a link to the license, and indicate if changes were made.
%		  You may do so in any reasonable manner, but not in any way that suggests the licensor endorses you or your use.
%    * NonCommercial — You may not use the material for commercial purposes.
%    * ShareAlike — If you remix, transform, or build upon the material, you must distribute your contributions under the same license as the original.
%    * No additional restrictions — You may not apply legal terms or technological measures that legally restrict others from doing anything the license permits.
% 
% more details: http://creativecommons.org/licenses/by-nc-sa/4.0/
% 
% authors: Fabian Gilson
%					Nicolas Genon
%
% custom latex color command macro file
%

%
% TODO command customization
%
\newcommand{\TODO}[1]{\textcolor{blue}{\textbf{TODO~\textit{#1}}}}
% or
\newcommand{\todo}[1]{\textcolor{red}{\textit{\textbf{TODO} : #1}}}

% suppress TODOs 
%\newcommand{\todo}[1]{}



%
% bullets, descriptions, etc
%
\let\descriptionlabel\relax
\newcommand*\descriptionlabel[1]{\hspace\labelsep \normalfont\bfseries #1}

\newlength{\Oldarrayrulewidth}
\newcommand{\Cline}[2]{%
  \noalign{\global\setlength{\Oldarrayrulewidth}{\arrayrulewidth}}%
  \noalign{\global\setlength{\arrayrulewidth}{#1}}\cline{#2}%
  \noalign{\global\setlength{\arrayrulewidth}{\Oldarrayrulewidth}}}

% draw a vertical rule of width 2pt on both sides of a cell
\newcommand{\Thickvrule}[1]{%
  \multicolumn{1}{!{\vrule width 5pt}c!{\vrule width 5pt}}{#1}%
}



%
% item customization
%
\newenvironment{myitem}{
\vspace{-.8em}
\begin{itemize} \setlength{\itemsep}{-.3em}}
{\end{itemize} \vspace{-.8em}
}



%
% description customization
%
\newenvironment{mydescr}{
\vspace{-.8em}
\begin{description} \setlength{\itemsep}{-.3em}}
{\end{description} \vspace{-.8em}}



%
%  enumeration customization
%
\newenvironment{myenum}{
\vspace{-.8em}
\begin{enumerate} \setlength{\itemsep}{-.3em}}
{\end{enumerate} \vspace{-.8em}}

\usepackage{adjustbox}
\newenvironment{summary}{%
\vspace*{0.5em}
\centering\hfill\begin{adjustbox}{minipage=.9\textwidth,center}
\small\itshape}
{\normalfont\end{adjustbox}
\vspace*{1em}}



%
% hyperref
%
\usepackage{hyperref}
\hypersetup{
	colorlinks=true,
	citecolor=myviolet,
	filecolor=myred,
	linktoc=all,
	linkcolor=myblue,
	urlcolor=myred
}



%
% fancy quotes
%
\makeatletter
\def\fquote{%
	\@ifnextchar[{\fquote@i}{\fquote@i[]}%]
}%
\def\fquote@i[#1]{%
	\def\tempa{#1}%
	\@ifnextchar[{\fquote@ii}{\fquote@ii[]}%]
}%
\def\fquote@ii[#1]{%
	\def\tempb{#1}%
	\@ifnextchar[{\fquote@iii}{\fquote@iii[]}%]
}%
\def\fquote@iii[#1]{%
	\def\tempc{#1}%
	\noindent%

	\begin{list}{}{\setlength{\leftmargin}{0.1\textwidth}\setlength{\rightmargin}{0.1\textwidth}} %%
		\item[]\raggedleft%
		\begin{picture}(0,0)%
			\put(-15,-5){\makebox(0,0){\scalebox{2.5}{\textcolor{myblue}{``}}}}%
		\end{picture}%
		\begingroup\small\itshape}%
 %%%%********************************************************************
		\def\endfquote{%
			\endgroup\par%
			\makebox[0pt][l]{%
			%\hspace{0.8\textwidth}%
			\begin{picture}(0,0)(0,0)%
				\put(15,15){\makebox(0,0){%
				\scalebox{2.5}{\color{myblue}''}}}%
			\end{picture}}%
			\vspace*{-1.5em}\small
			\ifx\tempa\empty%
				\else%
				\ifx\tempc\empty%
					\hfill\\\mbox{}\hfill\tempa\ (\tempb)%
				\else%
					\hfill\\\mbox{}\hfill\tempa,\ \textit{\tempc}\ (\tempb)%
			\fi\fi\par%
			\normalfont
	\end{list}%
}%
\makeatother



%
% empheq customization (for math equations)
%
\usepackage{empheq}
\makeatletter
\MHInternalSyntaxOn
\renewenvironment{empheq}[2][]{%
  \let\savedmaketag\maketag@@@
  \renewcommand\eqref[1]{\textup{%
      \let\maketag@@@\savedmaketag%
      \tagform@{\ref{##1}}}%
  }
  \setkeys{EmphEqEnv}{#2}\setkeys{\EQ_options_name:}{#1}%
  \EmphEqMainEnv}{\endEmphEqMainEnv}
\MHInternalSyntaxOff
\makeatother

% fancy boxes (to be used with \begin{empheq}[box=\tcbhighmath]{align} ... \end{empheq})
\usepackage[many]{tcolorbox}
\tcbuselibrary{breakable}
\newtcbox{\mybox}{nobeforeafter,colframe=myblue,colback=myblue!5!white,arc=1pt,boxrule=1pt,boxsep=0pt,left=2pt,right=2pt,top=1pt,bottom=1pt, tcbox raise base}
%\usepackage{empheq}
\tcbset{highlight math style={enhanced,colframe=myblue,colback=myblue!5!white,arc=4pt,boxrule=1pt,boxsep=0pt,top=2mm,bottom=2mm,drop fuzzy shadow}}

% redefined environment for math equations
\newenvironment{myboxedeq}{
\noindent\vspace{1pt}\small
\begin{empheq}[box=\tcbhighmath]{align*}}
%\begin{empheq}[#1]{#2} \label{#3}} box=\tcbhighmath,align*,dumb
{\end{empheq}\vspace{1pt}\normalsize}

% caption and label in empheq
\usepackage{framed}
\newenvironment{myEquation}[1]
  {\begin{framed}{\noindent\bfseries#1}%
    \addtolength\textwidth{20pt}\par\noindent\hspace*{-10pt}\rule{\textwidth}{.4pt}}
  {\end{framed}}




%
% enhanced table column
% 
\usepackage{array}
\newcolumntype{r}[1]{>{\raggedleft}p{#1}}
\newcolumntype{c}[1]{>{\centering}p{#1}}
\newcolumntype{l}[1]{>{\raggedright\hspace{4pt}}p{#1}}
\newcolumntype{t}[1]{>{\ttfamily\raggedleft}p{#1}}

\makeatletter
\newcommand{\thickhline}{%
    \noalign {\ifnum 0=`}\fi \hrule height 1pt 
    \futurelet \reserved@a \@xhline
}
\newcolumntype{"}{@{\hskip\tabcolsep\vrule width 1pt\hskip\tabcolsep}}
\makeatother

% fancy highlighting
\newcommand\hlight[1]{\color{myblue2}\ttfamily#1\normalfont\normalcolor}

% colorized dingbats checkmarks
\newcommand{\cmark}{\textcolor{mygreen}{\ding{51}}}%
\newcommand{\xmark}{\textcolor{myred}{\ding{55}}}%

% thickline for tabular vertical rules 
\newcolumntype{'}{!{\vrule width 2pt}}

